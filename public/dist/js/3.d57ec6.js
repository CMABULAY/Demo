(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{20:function(t,r,e){"use strict";e.r(r);var a=e(1),s=e.n(a),n=e(10),o=e.n(n),i=e(3),c=e.n(i);function l(t,r,e,a,s,n,o){try{var i=t[n](o),c=i.value}catch(t){return void e(t)}i.done?r(c):Promise.resolve(c).then(a,s)}var u={middleware:"guest",metaInfo:function(){return{title:"Login"}},data:function(){return{user:!0,drawer:null,appName:window.config.appName,notif:1,overlay:!1,snackbar:{status:!1,message:""},token:"",value:!1,rules:{formRules:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+\..+/.test(t)||"E-mail must be valid"}],passwordRules:[function(t){return!!t||"This is required"},function(t){return t&&t.length<=10||"Password must be 10 characters"}]},form:new o.a({email:"",password:""}),remember:!1}},methods:{login:function(){var t,r=this;return(t=s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.$refs.form.validate()){t.next=4;break}return r.overlay=!0,t.next=4,c.a.post("/api/login",r.form).then((function(t){r.user=!1,r.$store.dispatch("auth/saveToken",{token:t.data.token,remember:r.remember}).then((function(t){r.snackbar.status=!0,r.snackbar.iconText="check",r.snackbar.iconColor="primary",r.snackbar.message="Login Successful.",r.$store.dispatch("auth/fetchUser"),r.$router.push({name:"dashboard"}).catch((function(t){}))}))})).catch((function(t){r.overlay=!1,r.snackbar.status=!0,r.snackbar.iconText="alert",r.snackbar.iconColor="error",r.snackbar.message="Invalid Email or Password."}));case 4:case"end":return t.stop()}}),t)})),function(){var r=this,e=arguments;return new Promise((function(a,s){var n=t.apply(r,e);function o(t){l(n,a,s,o,i,"next",t)}function i(t){l(n,a,s,o,i,"throw",t)}o(void 0)}))})()}}},v=e(2),d=Object(v.a)(u,(function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",[e("v-overlay",{attrs:{value:t.overlay}},[e("v-progress-circular",{attrs:{size:"55",color:"red darken-2",indeterminate:""}})],1),t._v(" "),""==t.token?[e("v-row",[e("v-col",{attrs:{xl:"2",cols:"5"}},[e("v-img",{attrs:{src:"/img/logo2.png"}})],1),t._v(" "),e("v-col",{attrs:{xl:"4"}}),t._v(" "),e("v-col",{attrs:{xl:"6",cols:"12"}},[e("v-card",{staticClass:"transparent mx-auto text-white skewed",attrs:{flat:"",width:"450"}},[e("v-img",{attrs:{src:"/img/login.png"}},[e("br"),e("br"),e("br"),t._v(" "),e("br"),t._v(" "),e("v-card",{staticClass:"transparent mx-auto",attrs:{width:"370",flat:""}},[e("v-container",[e("v-form",{ref:"form",on:{submit:function(r){return r.preventDefault(),t.login.apply(null,arguments)},keydown:function(r){return t.form.onKeydown(r)}}},[e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("h3",{staticStyle:{color:"#616161","font-size":"20px","text-align":"center"}},[t._v("\n                        Login\n                      ")])])],1),t._v(" "),e("v-row",[e("v-col",{staticClass:"py-1",attrs:{cols:"12",md:"12"}},[e("v-text-field",{attrs:{rules:t.rules.formRules,label:"Email","hide-details":"",outlined:"",dense:"","persistent-placeholder":"","error-messages":t.form.errors.has("email")?t.form.errors.errors.email[0]:""},model:{value:t.form.email,callback:function(r){t.$set(t.form,"email",r)},expression:"form.email"}})],1),t._v(" "),e("v-col",{staticClass:"py-1",attrs:{cols:"12",sm:"12"}},[e("v-text-field",{attrs:{label:"Password",outlined:"",small:"",rules:t.rules.passwordRules,dense:"","hide-details":"","error-messages":t.form.errors.has("password")?t.form.errors.errors.password[0]:"","append-icon":t.value?"mdi-eye-off":"mdi-eye",type:t.value?"text":"password"},on:{"click:append":function(){return t.value=!t.value}},model:{value:t.form.password,callback:function(r){t.$set(t.form,"password",r)},expression:"form.password"}})],1)],1),t._v(" "),e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-card-actions",[e("v-spacer"),t._v(" "),e("v-btn",{staticStyle:{"text-decoration":"none"},attrs:{dark:"",depressed:"",color:"yellow darken-2",loading:t.form.busy},on:{click:t.login}},[t._v("Ok")])],1),t._v(" "),e("v-card-actions",[e("v-btn",{staticStyle:{"text-decoration":"none","text-transform":"none"},attrs:{link:"",depressed:"",plain:"",text:"",to:"info"}},[e("v-icon",{attrs:{size:"70",color:"brown lighten-2"}},[t._v("mdi-face")])],1),t._v(" "),e("v-spacer"),t._v(" "),e("v-btn",{staticStyle:{"text-decoration":"none","text-transform":"none"},attrs:{dark:"",text:"",color:"warning",loading:t.form.busy,to:"/register"}},[t._v("Register")])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1),t._v(" "),e("v-row",[e("v-col",[e("v-img",{staticClass:"float-right",attrs:{src:"/img/other1.png",width:"300"}})],1)],1)]:t._e(),t._v(" "),e("v-snackbar",{staticClass:"text-center",attrs:{bottom:"","min-width":"auto",color:"brown lighten-2",vertical:t.$vuetify.breakpoint.xsOnly,timeout:"2500"},scopedSlots:t._u([{key:"action",fn:function(r){var a=r.attrs;return[e("v-btn",t._b({attrs:{small:t.$vuetify.breakpoint.smAndDown,color:"info",text:""},on:{click:function(r){t.snackbar.active=!1}}},"v-btn",a,!1),[e("v-icon",[t._v("mdi-close")])],1)]}}]),model:{value:t.snackbar.status,callback:function(r){t.$set(t.snackbar,"status",r)},expression:"snackbar.status"}},[e("span",[e("v-icon",{attrs:{color:t.snackbar.iconColor}},[t._v(t._s("mdi-"+t.snackbar.iconText))])],1),t._v(t._s(t.snackbar.message))])],2)}),[],!1,null,null,null);r.default=d.exports}}]);