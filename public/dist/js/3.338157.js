(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{19:function(e,t,r){"use strict";r.r(t);var a=r(1),s=r.n(a),o=r(11),n=r.n(o),i=r(3),c=r.n(i);function l(e,t,r,a,s,o,n){try{var i=e[o](n),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(a,s)}var u={middleware:"guest",metaInfo:function(){return{title:"Login"}},data:function(){return{user:!0,drawer:null,appName:window.config.appName,notif:1,overlay:!1,snackbar:{status:!1,message:""},token:"",value:!1,rules:{formRules:[function(e){return!!e||"E-mail is required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],passwordRules:[function(e){return!!e||"This is required"},function(e){return e&&e.length<=10||"Password must be 10 characters"}]},form:new n.a({email:"",password:""}),remember:!1}},methods:{login:function(){var e,t=this;return(e=s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.$refs.form.validate()){e.next=4;break}return t.overlay=!0,e.next=4,c.a.post("/api/login",t.form).then((function(e){t.user=!1,t.$store.dispatch("auth/saveToken",{token:e.data.token,remember:t.remember}).then((function(e){t.snackbar.status=!0,t.snackbar.iconText="check",t.snackbar.iconColor="primary",t.snackbar.message="Login Successful.",t.$store.dispatch("auth/fetchUser"),t.$router.push({name:"dashboard"}).catch((function(e){}))}))})).catch((function(e){t.overlay=!1,t.snackbar.status=!0,t.snackbar.iconText="alert",t.snackbar.iconColor="error",t.snackbar.message="Invalid Email or Password."}));case 4:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(a,s){var o=e.apply(t,r);function n(e){l(o,a,s,n,i,"next",e)}function i(e){l(o,a,s,n,i,"throw",e)}n(void 0)}))})()}}},d=r(2),m=Object(d.a)(u,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{"min-width":"280px"}},[""==e.token?[r("v-overlay",{attrs:{value:e.overlay}},[r("v-progress-circular",{attrs:{size:"55",color:"red darken-2",indeterminate:""}})],1),e._v(" "),r("v-card",{staticClass:"mx-auto",attrs:{width:"400"}},[r("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.login.apply(null,arguments)},keydown:function(t){return e.form.onKeydown(t)}}},[r("v-card-text",{staticClass:"pa-4 pa-xl-7 pa-lg-7 pa-md-5 pa-sm-5"},[r("v-row",[r("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[r("h3",{staticClass:"font-weight-bold",staticStyle:{color:"#616161"}},[e._v("\n                    Login\n                  ")])])],1),e._v(" "),r("v-row",[r("v-col",{staticClass:"py-1",attrs:{cols:"12",md:"12"}},[r("v-text-field",{attrs:{rules:e.rules.formRules,label:"Email","hide-details":"",outlined:"",dense:"","persistent-placeholder":"","error-messages":e.form.errors.has("email")?e.form.errors.errors.email[0]:"","prepend-icon":"mdi-email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),r("v-col",{staticClass:"py-1",attrs:{cols:"12",sm:"12"}},[r("v-text-field",{attrs:{label:"Password",outlined:"","persistent-placeholder":"",rules:e.rules.passwordRules,dense:"","hide-details":"","error-messages":e.form.errors.has("password")?e.form.errors.errors.password[0]:"","append-icon":e.value?"mdi-eye-off":"mdi-eye",type:e.value?"text":"password","prepend-icon":"mdi-key"},on:{"click:append":function(){return e.value=!e.value}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),e._v(" "),r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-btn",{staticStyle:{"text-decoration":"none","font-size":"20px"},attrs:{dark:"",block:"",color:"blue darken-2",loading:e.form.busy},on:{click:e.login}},[e._v("Ok")])],1)],1),e._v(" "),r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-card-actions",[r("v-btn",{staticStyle:{"text-decoration":"none","text-transform":"none","font-size":"20px"},attrs:{dark:"",small:"",color:"success",loading:e.form.busy,to:"/register"}},[e._v("Register")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{staticStyle:{"text-transform":"none","font-size":"20px"},attrs:{dark:"",text:"","x-small":"",color:"blue darken-2",loading:e.form.busy,to:"/info"}},[e._v("Info")])],1)],1)],1)],1)],1)],1)]:e._e(),e._v(" "),r("v-snackbar",{staticClass:"text-center",attrs:{bottom:"","min-width":"auto",vertical:e.$vuetify.breakpoint.xsOnly,timeout:"2500"},scopedSlots:e._u([{key:"action",fn:function(t){var a=t.attrs;return[r("v-btn",e._b({attrs:{small:e.$vuetify.breakpoint.smAndDown,color:"primary",text:""},on:{click:function(t){e.snackbar.active=!1}}},"v-btn",a,!1),[e._v("Close")])]}}]),model:{value:e.snackbar.status,callback:function(t){e.$set(e.snackbar,"status",t)},expression:"snackbar.status"}},[r("span",[r("v-icon",{attrs:{color:e.snackbar.iconColor}},[e._v(e._s("mdi-"+e.snackbar.iconText))])],1),e._v(e._s(e.snackbar.message))])],2)}),[],!1,null,null,null);t.default=m.exports}}]);